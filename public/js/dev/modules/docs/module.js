/**
 * @appular docs - displays documentation from json generated by grunt-appular-docs
 */
define([
    'jquery',
    'underscore',
    'backbone',
    './views/nav',
    './views/docs',
    'text!./templates/module.html'
], function ($, _, Backbone, Nav, Docs, template) {
    var View = Backbone.Module.extend({
            events: {
                'click a': 'update'
            },
            initialize: function () {
                this.listenTo(this.app.params, 'change:filter', function () {
                    console.log('filter');
                });
            },
            render: function () {
                this.$el.html(_.template(template));
                
                this.views.nav = new Nav({
                    el: '#module-docs-nav'
                }).render();

                this.views.docs = new Docs({
                    el: '#module-docs-docs'
                }).render();

                return this;
            },
            update: function () {
                this.app.params.setValue('filter', 'new');
            }
        });

    return View;
});